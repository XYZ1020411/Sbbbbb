<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¤šåŠŸèƒ½ç™»éŒ„ç³»çµ±</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            color: #333; 
            margin: 0; 
            padding: 0; 
            background-color: #FFD700; /* é‡‘é»ƒè‰²èƒŒæ™¯ */
        }
        .container { 
            background: rgba(255,255,255,0.9); 
            border-radius: 8px; 
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2); 
            margin: 20px auto; 
            padding: 20px; 
            max-width: 400px; 
        }
        h2 { text-align: center; color: #b30000; }
        input, textarea { 
            width: 100%; 
            padding: 10px; 
            margin: 10px 0; 
            border: 1px solid #ccc; 
            border-radius: 4px; 
        }
        button { 
            background-color: #FFA500; 
            color: black; 
            border: none; 
            padding: 10px; 
            border-radius: 4px; 
            cursor: pointer; 
            width: 100%; 
            margin: 5px 0; 
            transition: background-color 0.3s; 
        }
        button:hover { background-color: #FF8C00; }
        .hidden { display: none; }
        .cart-item { background: #e6ffe6; padding: 10px; margin: 5px 0; border-radius: 4px; }
        .message-item { background: #f9f9f9; padding: 10px; margin: 5px 0; border-radius: 4px; }
        .reply-item { background: #e6f7ff; padding: 10px; margin: 5px 0; border-radius: 4px; border-left: 4px solid #007bff; }
        .chat-container { max-height: 200px; overflow-y: auto; border: 1px solid #ccc; border-radius: 4px; padding: 10px; margin-bottom: 10px; }
        .chat-message { margin-bottom: 10px; }
        .chat-message.user { text-align: right; }
        .chat-message.ai { text-align: left; }
        .announcement { background: #fff3e0; padding: 10px; border-radius: 4px; margin-bottom: 10px; }
        .time-display { text-align: center; font-size: 1.2em; margin-bottom: 10px; }
    </style>
</head>
<body>
    <!-- ç™»éŒ„é¸é …é¸æ“‡ç•Œé¢ -->
    <div class="container" id="loginOptionContainer">
        <h2>è«‹é¸æ“‡ç™»éŒ„é¡å‹</h2>
        <button onclick="showLoginForm('vip')">VIP æœƒå“¡ç™»éŒ„</button>
        <button onclick="showLoginForm('normal')">æ™®é€šå®¢æˆ¶ç™»éŒ„</button>
        <button onclick="showLoginForm('admin')">ç®¡ç†å“¡ç™»éŒ„</button>
    </div>

    <!-- VIP ç™»éŒ„ç•Œé¢ -->
    <div class="container hidden" id="vipLoginContainer">
        <h2>VIP æœƒå“¡ç™»éŒ„</h2>
        <input type="text" id="vipUsername" placeholder="VIP å¸³è™Ÿ">
        <input type="password" id="vipPassword" placeholder="VIP å¯†ç¢¼">
        <button onclick="vipLogin()">VIP ç™»éŒ„</button>
        <button onclick="backToLoginOptions()">è¿”å›</button>
    </div>

    <!-- æ™®é€šå®¢æˆ¶ç™»éŒ„ç•Œé¢ -->
    <div class="container hidden" id="normalLoginContainer">
        <h2>æ™®é€šå®¢æˆ¶ç™»éŒ„</h2>
        <input type="text" id="normalUsername" placeholder="ç”¨æˆ¶å">
        <input type="password" id="normalPassword" placeholder="å¯†ç¢¼">
        <button onclick="normalLogin()">ç™»éŒ„</button>
        <button onclick="toggleVisibility('registerContainer', true)">è¨»å†Šæ–°å¸³è™Ÿ</button>
        <button onclick="backToLoginOptions()">è¿”å›</button>
    </div>

    <!-- ç®¡ç†å“¡ç™»éŒ„ç•Œé¢ -->
    <div class="container hidden" id="adminLoginContainer">
        <h2>ç®¡ç†å“¡ç™»éŒ„</h2>
        <input type="text" id="adminUsername" placeholder="ç®¡ç†å“¡å¸³è™Ÿ">
        <input type="password" id="adminPassword" placeholder="ç®¡ç†å“¡å¯†ç¢¼">
        <button onclick="adminLogin()">ç®¡ç†å“¡ç™»éŒ„</button>
        <button onclick="backToLoginOptions()">è¿”å›</button>
    </div>

    <!-- è¨»å†Šç•Œé¢ -->
    <div class="container hidden" id="registerContainer">
        <h2>è¨»å†Šæ–°å¸³è™Ÿ</h2>
        <input type="text" id="newUsername" placeholder="ç”¨æˆ¶å">
        <input type="password" id="newPassword" placeholder="å¯†ç¢¼">
        <button onclick="register()">è¨»å†Š</button>
        <button onclick="toggleVisibility('registerContainer', false)">è¿”å›</button>
    </div>

    <!-- VIP åŠŸèƒ½ç•Œé¢ -->
    <div class="container hidden" id="vipContainer">
        <h2>ğŸ›ï¸ å°Šè²´çš„ VIP æœƒå“¡æ‚¨å¥½ï¼</h2>
        <div class="time-display" id="currentTime"></div>
        <div id="announcementContainer" class="announcement"></div>
        <button onclick="vipCheckIn()">æ¯æ—¥ç°½åˆ° (10000 é»)</button>
        <button onclick="viewPoints()">æŸ¥çœ‹é»æ•¸</button>
        
        <h3>VIP å°ˆå±¬å•†å“</h3>
        <div id="redeemItemsContainer"></div>
        
        <h3>è³¼ç‰©è»Š</h3>
        <div id="cartContainer"></div>
        <button onclick="vipCheckout()">VIP çµå¸³ (8æŠ˜)</button>
        
        <h3>VIP åˆ®åˆ®æ¨‚</h3>
        <button onclick="vipBuyScratchCard()">è³¼è²·åˆ®åˆ®æ¨‚ï¼ˆ5 é»ï¼‰</button>
        <div id="scratchCard"><div id="scratchResult"></div></div>
        
        <h3>AI å®¢æœ</h3>
        <div class="chat-container" id="chatContainer"></div>
        <textarea id="customerMessageInput" placeholder="è«‹è¼¸å…¥æ‚¨çš„è¨Šæ¯..."></textarea>
        <button onclick="sendMessage()">ç™¼é€è¨Šæ¯</button>
        
        <h3>é›»å­éƒµä»¶</h3>
        <input type="text" id="friendUsername" placeholder="è«‹è¼¸å…¥æœ‹å‹çš„å¸³è™Ÿ">
        <textarea id="customerEmailInput" placeholder="è«‹è¼¸å…¥é›»å­éƒµä»¶å…§å®¹..."></textarea>
        <button onclick="sendEmail()">ç™¼é€é›»å­éƒµä»¶</button>
        
        <h3>å…Œæ›ç¢¼</h3>
        <input type="text" id="redeemCode" placeholder="è¼¸å…¥å…Œæ›ç¢¼">
        <button onclick="redeemWithCode()">å…Œæ›ç¢¼å…Œæ›</button>
    </div>

    <!-- æ™®é€šå®¢æˆ¶åŠŸèƒ½ç•Œé¢ -->
    <div class="container hidden" id="customerContainer">
        <h2>å®¢æˆ¶åŠŸèƒ½</h2>
        <div class="time-display" id="currentTime"></div>
        <div id="announcementContainer" class="announcement"></div>
        <button onclick="checkIn()">æ¯æ—¥ç°½åˆ° (100 é»)</button>
        <button onclick="viewPoints()">æŸ¥çœ‹é»æ•¸</button>
        
        <h3>å¯å…Œæ›ç‰©å“</h3>
        <div id="redeemItemsContainer"></div>
        
        <h3>è³¼ç‰©è»Š</h3>
        <div id="cartContainer"></div>
        <button onclick="checkout()">çµå¸³</button>
        
        <h3>åˆ®åˆ®æ¨‚</h3>
        <button onclick="buyScratchCard()">è³¼è²·åˆ®åˆ®æ¨‚ï¼ˆ10 é»ï¼‰</button>
        <div id="scratchCard"><div id="scratchResult"></div></div>
        
        <h3>AI å®¢æœ</h3>
        <div class="chat-container" id="chatContainer"></div>
        <textarea id="customerMessageInput" placeholder="è«‹è¼¸å…¥æ‚¨çš„è¨Šæ¯..."></textarea>
        <button onclick="sendMessage()">ç™¼é€è¨Šæ¯</button>
        
        <h3>é›»å­éƒµä»¶</h3>
        <input type="text" id="friendUsername" placeholder="è«‹è¼¸å…¥æœ‹å‹çš„å¸³è™Ÿ">
        <textarea id="customerEmailInput" placeholder="è«‹è¼¸å…¥é›»å­éƒµä»¶å…§å®¹..."></textarea>
        <button onclick="sendEmail()">ç™¼é€é›»å­éƒµä»¶</button>
        
        <h3>å…Œæ›ç¢¼</h3>
        <input type="text" id="redeemCode" placeholder="è¼¸å…¥å…Œæ›ç¢¼">
        <button onclick="redeemWithCode()">å…Œæ›ç¢¼å…Œæ›</button>
    </div>

    <!-- ç®¡ç†å“¡åŠŸèƒ½ç•Œé¢ -->
    <div class="container hidden" id="adminContainer">
        <h2>ç®¡ç†å“¡åŠŸèƒ½</h2>
        <div class="time-display" id="adminTime"></div>
        <button onclick="viewUsers()">æŸ¥çœ‹æ‰€æœ‰ç”¨æˆ¶</button>
        
        <h3>å®¢æœè¨Šæ¯</h3>
        <div id="messagesContainer"></div>
        
        <h3>å›è¦†è¨Šæ¯</h3>
        <textarea id="replyMessageInput" placeholder="è¼¸å…¥å›è¦†å…§å®¹..."></textarea>
        <button onclick="replyMessage()">å›è¦†</button>
        <input type="hidden" id="currentMessageId">
        
        <h3>æ–°å¢å¯å…Œæ›ç‰©å“</h3>
        <input type="text" id="itemName" placeholder="ç‰©å“åç¨±">
        <input type="number" id="itemCost" placeholder="æ‰€éœ€é»æ•¸" min="1">
        <button onclick="addRedeemItem()">æ–°å¢ç‰©å“</button>
        
        <h3>åˆªé™¤å¯å…Œæ›ç‰©å“</h3>
        <input type="text" id="deleteItemName" placeholder="ç‰©å“åç¨±">
        <button onclick="deleteRedeemItem()">åˆªé™¤ç‰©å“</button>
        
        <h3>æ–°å¢å…Œæ›ç¢¼</h3>
        <input type="text" id="newRedeemCode" placeholder="è¼¸å…¥å…Œæ›ç¢¼">
        <input type="number" id="redeemPoints" placeholder="ç²å¾—é»æ•¸" min="1">
        <button onclick="addRedeemCode()">æ–°å¢å…Œæ›ç¢¼</button>
        
        <h3>é›»å­éƒµä»¶ç³»çµ±</h3>
        <div id="adminEmailContainer"></div>
        <textarea id="adminEmailInput" placeholder="è«‹è¼¸å…¥é›»å­éƒµä»¶å…§å®¹..."></textarea>
        <button onclick="sendAdminEmail()">ç™¼é€é›»å­éƒµä»¶</button>
    </div>

<script>
// åˆå§‹åŒ–æ•¸æ“š
let currentUser = null;
let redeemItems = { 
    "VIP å•†å“A": { cost: 200, original: 250 }, 
    "VIP å•†å“B": { cost: 400, original: 500 },
    "æ™®é€šå•†å“A": { cost: 20, original: 20 },
    "æ™®é€šå•†å“B": { cost: 50, original: 50 }
};
let redeemCodes = [{code: "vip6666", points: 10000}]; // é è¨­å…Œæ›ç¢¼
let cart = [];
let registeredUsers = JSON.parse(localStorage.getItem('registeredUsers')) || {
    "vip8888": {  // é å…ˆè¨»å†Š VIP å¸³è™Ÿ
        password: "vip8888",
        email: "vip8888@vip.com",
        points: 50000,
        isVIP: true,
        lastCheckIn: null
    }
};

// ================= VIP å°ˆå±¬åŠŸèƒ½ =================
function vipLogin() {
    const username = document.getElementById('vipUsername').value.trim();
    const password = document.getElementById('vipPassword').value.trim();
    if(registeredUsers[username] && registeredUsers[username].password === password && registeredUsers[username].isVIP) {
        currentUser = { username, ...registeredUsers[username] };
        toggleVisibility('vipContainer', true);
        document.getElementById('vipContainer').querySelector('h2').textContent = 
            `ğŸ‰ å°Šè²´çš„ ${username} æœƒå“¡ï¼Œæ­¡è¿ç™»å…¥ VIP ç³»çµ±ï¼`;
        displayRedeemItems();
    } else {
        alert("VIP å¸³è™Ÿæˆ–å¯†ç¢¼éŒ¯èª¤ï¼");
    }
}

function vipCheckIn() {
    if(currentUser.lastCheckIn === new Date().toDateString()) {
        return alert("ä»Šæ—¥å·²ç°½åˆ°ï¼");
    }
    currentUser.points += 10000;
    updateUserData();
    alert("âœ… VIP ç°½åˆ°æˆåŠŸï¼ç²å¾— 10000 é»ï¼");
}

function vipCheckout() {
    const total = cart.reduce((sum, item) => sum + (item.cost * 0.8), 0);
    if(currentUser.points < total) return alert("é»æ•¸ä¸è¶³ï¼");
    currentUser.points -= total;
    cart = [];
    updateUserData();
    alert(`ğŸ’ VIP çµå¸³æˆåŠŸï¼ç¯€çœ ${total * 0.2} é»ï¼`);
}

function vipBuyScratchCard() {
    if(currentUser.points < 5) return alert("é»æ•¸ä¸è¶³ï¼");
    currentUser.points -= 5;
    const prizes = [500, 1000, 2000, 5000];
    const prize = prizes[Math.floor(Math.random() * prizes.length)];
    currentUser.points += prize;
    document.getElementById('scratchResult').innerHTML = 
        `ğŸ° VIP åˆ®åˆ®æ¨‚ä¸­çï¼ç²å¾— ${prize} é»ï¼`;
    updateUserData();
}

// ================= æ™®é€šå®¢æˆ¶åŠŸèƒ½ =================
function normalLogin() {
    const username = document.getElementById('normalUsername').value.trim();
    const password = document.getElementById('normalPassword').value.trim();
    if(registeredUsers[username] && registeredUsers[username].password === password && !registeredUsers[username].isVIP) {
        currentUser = { username, ...registeredUsers[username] };
        toggleVisibility('customerContainer', true);
        displayRedeemItems();
    } else {
        alert("å¸³è™Ÿæˆ–å¯†ç¢¼éŒ¯èª¤ï¼");
    }
}

function checkIn() {
    if(currentUser.lastCheckIn === new Date().toDateString()) {
        return alert("ä»Šæ—¥å·²ç°½åˆ°ï¼");
    }
    currentUser.points += 100;
    updateUserData();
    alert("âœ… ç°½åˆ°æˆåŠŸï¼ç²å¾— 100 é»ï¼");
    checkVIPUpgrade(); // æª¢æŸ¥æ˜¯å¦å‡ç´šç‚º VIP
}

function buyScratchCard() {
    if(currentUser.points < 10) return alert("é»æ•¸ä¸è¶³ï¼");
    currentUser.points -= 10;
    const prizes = [10, 20, 30, 50, 100];
    const prize = prizes[Math.floor(Math.random() * prizes.length)];
    currentUser.points += prize;
    document.getElementById('scratchResult').innerHTML = 
        `ğŸ° åˆ®åˆ®æ¨‚ä¸­çï¼ç²å¾— ${prize} é»ï¼`;
    updateUserData();
    checkVIPUpgrade(); // æª¢æŸ¥æ˜¯å¦å‡ç´šç‚º VIP
}

// æª¢æŸ¥æ™®é€šç”¨æˆ¶æ˜¯å¦å‡ç´šç‚º VIP
function checkVIPUpgrade() {
    if (currentUser.points >= 10000 && !currentUser.isVIP) {
        currentUser.isVIP = true;
        registeredUsers[currentUser.username].isVIP = true;
        updateUserData();
        alert("ğŸ‰ æ­å–œï¼æ‚¨çš„é»æ•¸å·²é”åˆ° 10000 é»ï¼Œè‡ªå‹•å‡ç´šç‚º VIP æœƒå“¡ï¼");
    }
}

// ================= ç®¡ç†å“¡åŠŸèƒ½ =================
function adminLogin() {
    const username = document.getElementById('adminUsername').value.trim();
    const password = document.getElementById('adminPassword').value.trim();
    if(username === "xyz0411" && password === "xyz1020411") {
        currentUser = { username, points: 100, isAdmin: true };
        toggleVisibility('adminContainer', true);
    } else {
        alert("ç®¡ç†å“¡å¸³è™Ÿæˆ–å¯†ç¢¼éŒ¯èª¤ï¼");
    }
}

// ================= é€šç”¨åŠŸèƒ½ =================
function register() {
    const username = document.getElementById('newUsername').value.trim();
    const password = document.getElementById('newPassword').value.trim();
    if (!username || !password) return alert("è«‹è¼¸å…¥ç”¨æˆ¶åå’Œå¯†ç¢¼ï¼");
    if (registeredUsers[username]) return alert("ç”¨æˆ¶åå·²å­˜åœ¨ï¼");
    registeredUsers[username] = { password, email: username + "@example.com", points: 0, lastCheckIn: null };
    localStorage.setItem('registeredUsers', JSON.stringify(registeredUsers));
    alert("è¨»å†ŠæˆåŠŸï¼");
    toggleVisibility('registerContainer', false);
}

function toggleVisibility(elementId, show) {
    document.getElementById(elementId).classList.toggle('hidden', !show);
}

function updateUserData() {
    registeredUsers[currentUser.username] = currentUser;
    localStorage.setItem('registeredUsers', JSON.stringify(registeredUsers));
}
</script>
</body>
</html>
